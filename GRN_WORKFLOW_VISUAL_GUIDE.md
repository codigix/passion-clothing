# GRN Workflow - Complete Visual Guide

## ğŸ¯ Workflow Entry Point

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           PROCUREMENT DASHBOARD                                 â”‚
â”‚           /dashboards/procurement                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“Š 3 MAIN TABS:                                                â”‚
â”‚  â”œâ”€ 1ï¸âƒ£  Incoming Orders (Sales Orders + Draft POs)            â”‚
â”‚  â”œâ”€ 2ï¸âƒ£  Purchase Orders [ACTIVE TAB]                          â”‚
â”‚  â””â”€ 3ï¸âƒ£  Vendors                                               â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“‹ PURCHASE ORDERS TABLE:                                      â”‚
â”‚  â”œâ”€ Headers: PO#, Date, Vendor, Customer, Qty, Amount, Status â”‚
â”‚  â”œâ”€ Each Row Has: Expand Chevron â†’ Actions Button               â”‚
â”‚  â””â”€ Status Badge Shows: Draft, Pending, Approved, Sent,        â”‚
â”‚                        Received, GRN Created, Completed        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  USER CLICKS EXPAND CHEVRON (â†’)       â”‚
         â”‚  on Purchase Order Row                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           EXPANDED ACTIONS PANEL                                â”‚
â”‚           (Row expands to show action buttons)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Available Actions (6 buttons):                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   ğŸ‘ï¸     â”‚ â”‚    âœ“     â”‚ â”‚   ğŸšš     â”‚ â”‚   ğŸ“¦     â”‚          â”‚
â”‚  â”‚  View    â”‚ â”‚ Submit   â”‚ â”‚  Send    â”‚ â”‚ Received â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   ğŸ“„     â”‚ â”‚   ğŸ”²     â”‚ â”‚   ğŸ–¨ï¸     â”‚ â”‚   ğŸ—‘ï¸     â”‚          â”‚
â”‚  â”‚ Invoice  â”‚ â”‚   QR     â”‚ â”‚  Print   â”‚ â”‚ Delete   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸  NOTE: "Create GRN" is NOT in dashboard actions             â”‚
â”‚      It's accessed from Inventory Module instead               â”‚
â”‚      (See: Alternative GRN Creation Paths below)               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Alternative GRN Creation Paths

### **Path 1: Direct URL Navigation** (Manual)

```
User manually navigates to:
/inventory/grn/create?po_id=<PO_ID>

Steps:
1. Open browser address bar
2. Enter full URL with PO ID
3. CreateGRNPage loads and fetches PO data
```

### **Path 2: From GoodsReceiptNotePage** (Inventory Module)

```
Navigation:
Sidebar â†’ Inventory â†’ Goods Receipt Note
    â†“
GoodsReceiptNotePage (/inventory/goods-receipt-note)
    â†“
Shows list of Purchase Orders awaiting GRN
    â†“
Click "Create GRN" button on specific PO
    â†“
Redirects to: /inventory/grn/create?po_id=<PO_ID>
    â†“
CreateGRNPage loads
```

### **Path 3: From Inventory Module Dashboard** (Future)

```
Could be added as quick action:
Inventory Dashboard
    â†“
"Pending GRN Requests" section
    â†“
Click on any PO
    â†“
Navigate to GRN creation
```

---

## ğŸ“Š Complete GRN Workflow - Step by Step

### **STAGE 1ï¸âƒ£: INITIATION - Purchase Order Ready**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PURCHASE ORDER STATE                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status: 'sent' OR 'grn_approved'  â† Prerequisites met         â”‚
â”‚  Total Amount: â‚¹50,000                                         â”‚
â”‚  Expected Delivery: Jan 20, 2025                               â”‚
â”‚  Vendor: ABC Textiles Inc.                                     â”‚
â”‚  Items:                                                         â”‚
â”‚    â€¢ Cotton Fabric (100 meters) @ â‚¹150/meter                  â”‚
â”‚    â€¢ Polyester Blend (50 kg) @ â‚¹200/kg                        â”‚
â”‚    â€¢ Trims & Buttons (1 box) @ â‚¹1,000/box                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
        [Materials physically arrive at warehouse]
                            â†“
     Inventory staff needs to create GRN
```

---

### **STAGE 2ï¸âƒ£: FORM LOADING - CreateGRNPage**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CREATE GRN PAGE LOADS                                           â”‚
â”‚  URL: /inventory/grn/create?po_id=12345                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  FORM INITIALIZATION:                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ fetchPurchaseOrder() triggered                           â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚ GET /procurement/pos/12345                              â”‚  â”‚
â”‚  â”‚   â”œâ”€ Fetch full PO with vendor, items, dates           â”‚  â”‚
â”‚  â”‚   â”œâ”€ Extract all item details                          â”‚  â”‚
â”‚  â”‚   â””â”€ Map to form structure                             â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚ Initialize Form State:                                 â”‚  â”‚
â”‚  â”‚ â”œâ”€ received_date: TODAY                                â”‚  â”‚
â”‚  â”‚ â”œâ”€ inward_challan_number: ''                           â”‚  â”‚
â”‚  â”‚ â”œâ”€ supplier_invoice_number: ''                         â”‚  â”‚
â”‚  â”‚ â”œâ”€ remarks: ''                                         â”‚  â”‚
â”‚  â”‚ â””â”€ items_received: [                                   â”‚  â”‚
â”‚  â”‚    {                                                    â”‚  â”‚
â”‚  â”‚      item_index: 0,                                    â”‚  â”‚
â”‚  â”‚      material_name: 'Cotton Fabric',                   â”‚  â”‚
â”‚  â”‚      color: 'Navy Blue',                               â”‚  â”‚
â”‚  â”‚      gsm: '200',                                       â”‚  â”‚
â”‚  â”‚      uom: 'Meters',                                    â”‚  â”‚
â”‚  â”‚      ordered_qty: 100,                                 â”‚  â”‚
â”‚  â”‚      invoiced_qty: 100,  â† defaults to ordered         â”‚  â”‚
â”‚  â”‚      received_qty: 100,   â† defaults to ordered        â”‚  â”‚
â”‚  â”‚      weight: '',                                       â”‚  â”‚
â”‚  â”‚      remarks: ''                                       â”‚  â”‚
â”‚  â”‚    }                                                    â”‚  â”‚
â”‚  â”‚    ...more items                                       â”‚  â”‚
â”‚  â”‚   ]                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **STAGE 3ï¸âƒ£: DATA ENTRY - User Fills Form**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GRN FORM RENDERING                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ğŸ“‹ HEADER SECTION                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Create Goods Receipt Note                               â”‚  â”‚
â”‚  â”‚ (Record materials received from vendor with 3-way       â”‚  â”‚
â”‚  â”‚  matching)                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  ğŸ“¦ PO SUMMARY CARD                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PO Number: PO-20250101-00123                            â”‚  â”‚
â”‚  â”‚ Vendor: ABC Textiles Inc.                               â”‚  â”‚
â”‚  â”‚ Customer: XYZ Garments                                  â”‚  â”‚
â”‚  â”‚ Total Items: 3                                          â”‚  â”‚
â”‚  â”‚ PO Amount: â‚¹50,000                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  âœï¸  RECEIPT INFORMATION SECTION                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Received Date: [2025-01-17] *                           â”‚  â”‚
â”‚  â”‚ Vendor Challan: [_____________]                         â”‚  â”‚
â”‚  â”‚ Invoice Number: [INV-20250117-001] *                    â”‚  â”‚
â”‚  â”‚ Remarks:       [_____________]                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  ğŸ”„ 3-WAY MATCHING TABLE                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ # â”‚Material â”‚Specsâ”‚UOMâ”‚Orderedâ”‚Invoicedâ”‚Receivedâ”‚Remarksâ”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚1 â”‚Cotton  â”‚Navy â”‚M  â”‚ 100  â”‚  100   â”‚ 100   â”‚      â”‚ â”‚
â”‚  â”‚  â”‚Fabric  â”‚Blue â”‚   â”‚      â”‚        â”‚       â”‚      â”‚ â”‚
â”‚  â”‚  â”‚        â”‚200g â”‚   â”‚      â”‚        â”‚       â”‚      â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚2 â”‚Poly    â”‚Grey â”‚Kg â”‚ 50   â”‚  48    â”‚  46   â”‚Short â”‚ â”‚
â”‚  â”‚  â”‚Blend   â”‚     â”‚   â”‚      â”‚        â”‚       â”‚2kg   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  User edits "Invoiced" & "Received" columns                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **STAGE 4ï¸âƒ£: REAL-TIME VALIDATION**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AS USER ENTERS QUANTITIES                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  CALCULATIONS TRIGGERED:                                        â”‚
â”‚                                                                  â”‚
â”‚  For each item:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Shortage = min(ordered, invoiced) - received           â”‚   â”‚
â”‚  â”‚ Overage = received - max(ordered, invoiced)            â”‚   â”‚
â”‚  â”‚ Invoice Mismatch = (invoiced â‰  ordered)                â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ Quality Flag = has shortage OR overage OR mismatch     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  REAL-TIME SUMMARY UPDATE:                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ… Perfect Matches: 1 item                             â”‚   â”‚
â”‚  â”‚ âš ï¸  Shortages: 1 item  (Poly Blend: 2kg missing)       â”‚   â”‚
â”‚  â”‚ âš ï¸  Overages: 0 items                                  â”‚   â”‚
â”‚  â”‚ âš ï¸  Invoice Mismatches: 1 item                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  WARNING ALERT (if shortages detected):                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”´ SHORTAGE DETECTED!                                  â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ 1 item(s) have quantity shortages. A vendor return    â”‚   â”‚
â”‚  â”‚ request will be automatically created.                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **STAGE 5ï¸âƒ£: FORM SUBMISSION**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER CLICKS "SAVE & VERIFY" BUTTON                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  VALIDATION:                                                    â”‚
â”‚  âœ“ At least 1 item has received_qty > 0                        â”‚
â”‚  âœ“ Received date is selected                                    â”‚
â”‚  âœ“ Supplier invoice number is filled                            â”‚
â”‚  âœ“ Form data is complete                                        â”‚
â”‚                                                                  â”‚
â”‚  If validation passes:                                          â”‚
â”‚  â””â”€ POST /grn/from-po/:poId  with payload                      â”‚
â”‚                                                                  â”‚
â”‚  PAYLOAD STRUCTURE:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ {                                                        â”‚  â”‚
â”‚  â”‚   received_date: "2025-01-17",                          â”‚  â”‚
â”‚  â”‚   inward_challan_number: "DC-99999",                    â”‚  â”‚
â”‚  â”‚   supplier_invoice_number: "INV-20250117-001",          â”‚  â”‚
â”‚  â”‚   remarks: "Received in good condition",                â”‚  â”‚
â”‚  â”‚   items_received: [                                     â”‚  â”‚
â”‚  â”‚     {                                                    â”‚  â”‚
â”‚  â”‚       item_index: 0,                                    â”‚  â”‚
â”‚  â”‚       material_name: "Cotton Fabric",                   â”‚  â”‚
â”‚  â”‚       ordered_qty: 100,                                 â”‚  â”‚
â”‚  â”‚       invoiced_qty: 100,                                â”‚  â”‚
â”‚  â”‚       received_qty: 100,                                â”‚  â”‚
â”‚  â”‚       weight: "",                                       â”‚  â”‚
â”‚  â”‚       remarks: ""                                       â”‚  â”‚
â”‚  â”‚     },                                                   â”‚  â”‚
â”‚  â”‚     {                                                    â”‚  â”‚
â”‚  â”‚       item_index: 1,                                    â”‚  â”‚
â”‚  â”‚       material_name: "Poly Blend",                      â”‚  â”‚
â”‚  â”‚       ordered_qty: 50,                                  â”‚  â”‚
â”‚  â”‚       invoiced_qty: 48,                                 â”‚  â”‚
â”‚  â”‚       received_qty: 46,                                 â”‚  â”‚
â”‚  â”‚       weight: "",                                       â”‚  â”‚
â”‚  â”‚       remarks: "2kg shortage"                           â”‚  â”‚
â”‚  â”‚     }                                                    â”‚  â”‚
â”‚  â”‚   ]                                                      â”‚  â”‚
â”‚  â”‚ }                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
           [Request sent to backend]
```

---

### **STAGE 6ï¸âƒ£: BACKEND PROCESSING - Transaction**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND: POST /grn/from-po/:poId                                â”‚
â”‚  (Atomic Transaction Starts)                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  âœ… STEP 1: Generate GRN Number                                 â”‚
â”‚  â”œâ”€ Format: GRN-YYYYMMDD-XXXXX                                  â”‚
â”‚  â”œâ”€ Get today's date: 2025-01-17                               â”‚
â”‚  â”œâ”€ Find last GRN created today                                â”‚
â”‚  â”œâ”€ Calculate next sequence: 00001, 00002, etc.               â”‚
â”‚  â””â”€ Result: GRN-20250117-00001                                 â”‚
â”‚                                                                  â”‚
â”‚  âœ… STEP 2: Extract & Map Item Data                            â”‚
â”‚  â””â”€ For each received item:                                     â”‚
â”‚     â”œâ”€ Extract: material_name, color, HSN, GSM, width         â”‚
â”‚     â”œâ”€ Calculate: shortage_qty, overage_qty                    â”‚
â”‚     â”œâ”€ Set: quality_status = 'pending_inspection'             â”‚
â”‚     â”œâ”€ Flag: discrepancy_flag = true/false                    â”‚
â”‚     â””â”€ Example:                                                â”‚
â”‚        {                                                        â”‚
â”‚          material_name: "Cotton Fabric",                       â”‚
â”‚          ordered: 100, invoiced: 100, received: 100,          â”‚
â”‚          shortage: 0, overage: 0,                             â”‚
â”‚          discrepancy_flag: false,                             â”‚
â”‚          quality_status: "pending_inspection"                 â”‚
â”‚        },                                                       â”‚
â”‚        {                                                        â”‚
â”‚          material_name: "Poly Blend",                          â”‚
â”‚          ordered: 50, invoiced: 48, received: 46,             â”‚
â”‚          shortage: 2, overage: 0,                             â”‚
â”‚          discrepancy_flag: true,  â† HAS SHORTAGE              â”‚
â”‚          quality_status: "pending_inspection"                 â”‚
â”‚        }                                                        â”‚
â”‚                                                                  â”‚
â”‚  âœ… STEP 3: Create GRN Record                                  â”‚
â”‚  â”œâ”€ GoodsReceiptNote.create({                                  â”‚
â”‚  â”‚   grn_number: 'GRN-20250117-00001',                        â”‚
â”‚  â”‚   purchase_order_id: 'po-12345',                           â”‚
â”‚  â”‚   received_date: '2025-01-17',                             â”‚
â”‚  â”‚   items_received: [mapped items array],                    â”‚
â”‚  â”‚   total_received_value: 49000,                             â”‚
â”‚  â”‚   status: 'received',                                      â”‚
â”‚  â”‚   verification_status: 'pending',                          â”‚
â”‚  â”‚   created_by: 'user-456'                                   â”‚
â”‚  â”‚ })                                                           â”‚
â”‚  â””â”€ Result: GRN Record Created âœ“                              â”‚
â”‚                                                                  â”‚
â”‚  âœ… STEP 4: Update Purchase Order                              â”‚
â”‚  â”œâ”€ PurchaseOrder.update({                                     â”‚
â”‚  â”‚   status: 'received',                                      â”‚
â”‚  â”‚   received_date: '2025-01-17'                              â”‚
â”‚  â”‚ })                                                           â”‚
â”‚  â””â”€ Result: PO Status Updated âœ“                               â”‚
â”‚                                                                  â”‚
â”‚  âœ… STEP 5: Check for Shortages                               â”‚
â”‚  â”œâ”€ Filter items where shortage_qty > 0                        â”‚
â”‚  â”œâ”€ Result: 1 item with 2kg shortage (Poly Blend)            â”‚
â”‚  â””â”€ Decision: YES â†’ Create Vendor Return âœ“                    â”‚
â”‚                                                                  â”‚
â”‚  âœ… STEP 6: Auto-Generate Vendor Return (if shortages)        â”‚
â”‚  â”œâ”€ Generate VR Number: VR-20250117-00001                     â”‚
â”‚  â”œâ”€ VendorReturn.create({                                      â”‚
â”‚  â”‚   return_number: 'VR-20250117-00001',                      â”‚
â”‚  â”‚   purchase_order_id: 'po-12345',                           â”‚
â”‚  â”‚   grn_id: 'grn-00001',                                     â”‚
â”‚  â”‚   vendor_id: 'vendor-789',                                 â”‚
â”‚  â”‚   return_type: 'shortage',                                 â”‚
â”‚  â”‚   items: [                                                  â”‚
â”‚  â”‚     {                                                        â”‚
â”‚  â”‚       material_name: 'Poly Blend',                         â”‚
â”‚  â”‚       shortage_qty: 2,                                     â”‚
â”‚  â”‚       shortage_value: 400,  (2 kg Ã— â‚¹200/kg)             â”‚
â”‚  â”‚       reason: 'Quantity mismatch - shortage detected'     â”‚
â”‚  â”‚     }                                                        â”‚
â”‚  â”‚   ],                                                         â”‚
â”‚  â”‚   total_shortage_value: 400,                               â”‚
â”‚  â”‚   status: 'pending',                                       â”‚
â”‚  â”‚   created_by: 'user-456'                                   â”‚
â”‚  â”‚ })                                                           â”‚
â”‚  â””â”€ Result: Vendor Return Auto-Created âœ“                      â”‚
â”‚                                                                  â”‚
â”‚  âœ… STEP 7: Send Notifications                                 â”‚
â”‚  â”œâ”€ Notification.create({                                      â”‚
â”‚  â”‚   type: 'grn_created',                                     â”‚
â”‚  â”‚   title: 'GRN GRN-20250117-00001 Created',                â”‚
â”‚  â”‚   message: 'GRN created with 1 shortage(s)...',            â”‚
â”‚  â”‚   department: 'procurement',                               â”‚
â”‚  â”‚   metadata: { grn_id, po_id, shortage_count }             â”‚
â”‚  â”‚ })                                                           â”‚
â”‚  â””â”€ Result: Teams Notified âœ“                                  â”‚
â”‚                                                                  â”‚
â”‚  âœ… TRANSACTION COMMITTED                                       â”‚
â”‚  â””â”€ All changes saved atomically to database âœ“                â”‚
â”‚                                                                  â”‚
â”‚  On ANY Error:                                                  â”‚
â”‚  â””â”€ All changes ROLLED BACK (nothing saved)                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **STAGE 7ï¸âƒ£: BACKEND RESPONSE**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SUCCESS RESPONSE (200 OK)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚ {                                                               â”‚
â”‚   "message": "GRN created successfully",                       â”‚
â”‚   "grn": {                                                      â”‚
â”‚     "id": "grn-uuid-00001",                                   â”‚
â”‚     "grn_number": "GRN-20250117-00001",                       â”‚
â”‚     "status": "received",                                      â”‚
â”‚     "verification_status": "pending",                          â”‚
â”‚     "items_received": [                                        â”‚
â”‚       {                                                         â”‚
â”‚         "material_name": "Cotton Fabric",                      â”‚
â”‚         "ordered_quantity": 100,                               â”‚
â”‚         "invoiced_quantity": 100,                              â”‚
â”‚         "received_quantity": 100,                              â”‚
â”‚         "shortage_quantity": 0,                                â”‚
â”‚         "discrepancy_flag": false,                             â”‚
â”‚         "quality_status": "pending_inspection"                 â”‚
â”‚       },                                                        â”‚
â”‚       {                                                         â”‚
â”‚         "material_name": "Poly Blend",                         â”‚
â”‚         "ordered_quantity": 50,                                â”‚
â”‚         "invoiced_quantity": 48,                               â”‚
â”‚         "received_quantity": 46,                               â”‚
â”‚         "shortage_quantity": 2,                                â”‚
â”‚         "discrepancy_flag": true,                              â”‚
â”‚         "quality_status": "pending_inspection"                 â”‚
â”‚       }                                                         â”‚
â”‚     ],                                                          â”‚
â”‚     "total_received_value": 49000,                             â”‚
â”‚     "created_by": "user-456",                                  â”‚
â”‚     "created_at": "2025-01-17T10:30:00Z"                      â”‚
â”‚   },                                                            â”‚
â”‚   "has_shortages": true,                                       â”‚
â”‚   "shortage_count": 1,                                         â”‚
â”‚   "vendor_return": {                                           â”‚
â”‚     "id": "vr-uuid-00001",                                    â”‚
â”‚     "return_number": "VR-20250117-00001",                     â”‚
â”‚     "status": "pending",                                       â”‚
â”‚     "total_shortage_value": 400                                â”‚
â”‚   }                                                             â”‚
â”‚ }                                                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **STAGE 8ï¸âƒ£: FRONTEND POST-SUCCESS**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HANDLE RESPONSE IN CreateGRNPage                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Check: has_shortages ?                                         â”‚
â”‚                                                                  â”‚
â”‚  IF YES (has shortages):                                        â”‚
â”‚  â”œâ”€ Show Alert:                                                â”‚
â”‚  â”‚  "GRN created with 1 shortage(s). Vendor return request    â”‚
â”‚  â”‚   auto-generated."                                         â”‚
â”‚  â””â”€ Auto-Redirect to:                                          â”‚
â”‚     /inventory/grn/{grnId}/verify                              â”‚
â”‚                                                                  â”‚
â”‚  IF NO (no shortages):                                          â”‚
â”‚  â”œâ”€ Show Alert:                                                â”‚
â”‚  â”‚  "GRN created successfully!"                               â”‚
â”‚  â””â”€ Auto-Redirect to:                                          â”‚
â”‚     /inventory/grn/{grnId}/verify                              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GRN VERIFICATION PAGE LOADS                                     â”‚
â”‚  /inventory/grn/{grnId}/verify                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  NEXT STEPS:                                                    â”‚
â”‚  â”œâ”€ Review all items with quality flagging                      â”‚
â”‚  â”œâ”€ Perform quality inspection                                  â”‚
â”‚  â”œâ”€ Set quality_status (pending â†’ approved/rejected)           â”‚
â”‚  â”œâ”€ Approve GRN (verification_status â†’ verified)              â”‚
â”‚  â””â”€ Move verified GRN to inventory system                       â”‚
â”‚                                                                  â”‚
â”‚  GRN Status Flow:                                               â”‚
â”‚  received â†’ verified â†’ inventory_added                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— Related Workflows

### **Vendor Return Process (Auto-Triggered)**

```
GRN Created with Shortages
        â†“
VendorReturn Auto-Generated
        â†“
Status: pending
        â†“
Procurement team can:
â”œâ”€ View return details
â”œâ”€ Track return status
â”œâ”€ Follow up with vendor
â””â”€ Mark as completed
```

### **Quality Control Workflow**

```
After GRN Creation
        â†“
Items marked: quality_status = 'pending_inspection'
        â†“
Discrepancy items flagged
        â†“
Quality team performs inspection
        â†“
Set quality_status: 'approved' or 'rejected'
        â†“
If 'approved': Add to inventory
If 'rejected': Create rejection request
```

---

## ğŸ“± User Roles & Permissions

```
ROLE              | Can Create GRN | Can Verify | Can Approve
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
inventory         | âœ… YES         | âœ… YES     | âœ… YES
admin             | âœ… YES         | âœ… YES     | âœ… YES
procurement       | âŒ NO          | âŒ NO      | âŒ NO
manufacturing     | âŒ NO          | âŒ NO      | âŒ NO
sales             | âŒ NO          | âŒ NO      | âŒ NO
```

---

## ğŸ¯ Key Workflow Features

| Feature                   | Description                                    | Location                |
| ------------------------- | ---------------------------------------------- | ----------------------- |
| **GRN Number Generation** | Auto-generates: GRN-YYYYMMDD-XXXXX             | Backend: grn.js:223     |
| **3-Way Matching**        | Compares PO vs Invoice vs Actual Receipt       | Backend: grn.js:232-276 |
| **Discrepancy Detection** | Flags shortages, overages, mismatches          | Backend: grn.js:243-246 |
| **Auto Vendor Return**    | Creates VR request if shortages detected       | Backend: grn.js:314-368 |
| **Quality Flagging**      | Items with discrepancies marked for inspection | Backend: grn.js:272     |
| **Atomic Transactions**   | All-or-nothing database updates                | Backend: grn.js:173-394 |
| **Notifications**         | Alerts procurement team of GRN creation        | Backend: grn.js:371-380 |
| **Verification Workflow** | Quality inspection before inventory addition   | GRNVerificationPage     |

---

## ğŸ“‚ File Structure

```
client/src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ dashboards/
â”‚   â”‚   â””â”€â”€ ProcurementDashboard.jsx          â† GRN workflow initiator
â”‚   â””â”€â”€ inventory/
â”‚       â”œâ”€â”€ CreateGRNPage.jsx                 â† GRN form
â”‚       â”œâ”€â”€ GRNVerificationPage.jsx           â† Quality verification
â”‚       â”œâ”€â”€ UpdateGRNPage.jsx                 â† Edit GRN
â”‚       â”œâ”€â”€ GoodsReceiptNotePage.jsx          â† GRN management
â”‚       â””â”€â”€ AddGRNToInventoryPage.jsx         â† Add to inventory
â”‚
server/routes/
â”œâ”€â”€ grn.js                                     â† GRN endpoints
â”œâ”€â”€ procurement.js                             â† PO management
â””â”€â”€ inventory.js                               â† Inventory operations
```

---

## ğŸš€ Workflow Recommendations

### **To Improve Accessibility:**

1. âœ… Add "Create GRN" action button in Procurement Dashboard

   - Option A: Add to expandable actions panel
   - Option B: Add as quick action in PO status column

2. âœ… Add "Create GRN" link in PO Details page

   - Include validation check
   - Show warning if PO already has GRN

3. âœ… Add GRN widget to Inventory Dashboard

   - Show pending GRNs requiring verification
   - Quick access to create new GRN

4. âœ… Implement bulk GRN creation

   - Select multiple POs
   - Create multiple GRNs in batch

5. âœ… Add GRN creation notifications
   - Alert inventory team when PO status becomes "sent"
   - Suggest GRN creation action

---

## ğŸ’¡ Next Steps

Would you like to:

1. **Add "Create GRN" button to ProcurementDashboard?**
2. **Create bulk GRN creation feature?**
3. **Add GRN status tracking dashboard?**
4. **Implement auto-GRN creation for received POs?**
5. **Add GRN export/reporting functionality?**
